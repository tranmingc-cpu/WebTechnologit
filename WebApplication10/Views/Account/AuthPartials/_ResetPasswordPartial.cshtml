@* KHÔNG Layout *@

<div class="auth-box">
    <div class="auth-header">
        <h2><span>TECH</span> STORE</h2>
        <p>Đặt lại mật khẩu</p>
    </div>

    <div class="auth-body">
        @using (Html.BeginForm("ResetPassword", "Account", FormMethod.Post, new { autocomplete = "off" }))
        {
            @Html.AntiForgeryToken()

            <input type="hidden" name="token" value="@ViewBag.Token" />

            @* ERROR TỔNG – CHỈ HIỆN KHI SUBMIT *@
            if (!ViewData.ModelState.IsValid && ViewData.ModelState.Count > 0)
            {
                <div class="auth-error">
                    @Html.ValidationSummary(false)
                </div>
            }

            <div class="form-group">
                <label>Mật khẩu mới</label>
                <input type="password"
                       name="newPassword"
                       placeholder="Nhập mật khẩu mới" />

                @* PASSWORD ERROR *@
                @if (ViewData.ModelState.ContainsKey("newPassword") &&
                     ViewData.ModelState["newPassword"].Errors.Count > 0)
                {
                    <div class="field-error">
                        @ViewData.ModelState["newPassword"].Errors[0].ErrorMessage
                    </div>
                }
            </div>

            <button type="submit" class="btn-auth">
                Đổi mật khẩu
            </button>
        }

        @* MESSAGE THÀNH CÔNG *@
        @if (ViewBag.Message != null)
        {
            <div class="auth-success">
                @ViewBag.Message
            </div>
        }

        <div class="auth-links">
            Đã nhớ mật khẩu?
            <a href="/Account/Login" data-auth-link>
                Quay lại đăng nhập
            </a>
        </div>
    </div>
</div>